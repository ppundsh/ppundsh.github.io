<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="KoUtfkPM92_pO2Q42heYL6rswPDbdQo1Q0HKel728Vk">




















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.1.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.1.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="以前一直以為 Tor 一定要配合引導，後來看到文章才知道 Tor 可以在指令模式下運作，真該早點看官方文件的…記錄一下常用的指令">
<meta name="keywords" content="Tor,GFW">
<meta property="og:type" content="article">
<meta property="og:title" content="Tor 指令備忘">
<meta property="og:url" content="https://ppundsh.github.io/posts/44c2/index.html">
<meta property="og:site_name" content="Flymia 凡事用心之事">
<meta property="og:description" content="以前一直以為 Tor 一定要配合引導，後來看到文章才知道 Tor 可以在指令模式下運作，真該早點看官方文件的…記錄一下常用的指令">
<meta property="og:locale" content="zh-TW">
<meta property="og:updated_time" content="2018-04-17T13:41:53.306Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tor 指令備忘">
<meta name="twitter:description" content="以前一直以為 Tor 一定要配合引導，後來看到文章才知道 Tor 可以在指令模式下運作，真該早點看官方文件的…記錄一下常用的指令">



  <link rel="alternate" href="/atom.xml" title="Flymia 凡事用心之事" type="application/atom+xml">




  <link rel="canonical" href="https://ppundsh.github.io/posts/44c2/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Tor 指令備忘 | Flymia 凡事用心之事</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-TW">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> 

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Flymia 凡事用心之事</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">科技、藝術、工藝</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切換導航欄">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
          
  
  <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首頁</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>歸檔</a>
</li>

      

      
    </ul>
  

  
    

    
    
      
      
    
      
      
    
    

  


  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ppundsh.github.io/posts/44c2/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Flymia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Flymia 凡事用心之事">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Tor 指令備忘</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">發表於</span>
              
              <time title="創建於" itemprop="dateCreated datePublished" datetime="2018-04-17T04:55:45+08:00">2018-04-17</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">文章字數：</span>
                
                <span title="文章字數">6.7k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">閱讀時間&asymp;</span>
                
                <span title="閱讀時間">0:07</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>以前一直以為 Tor 一定要配合引導，後來看到文章才知道 Tor 可以在指令模式下運作，真該早點看官方文件的…記錄一下常用的指令<br><a id="more"></a><br>安裝服務<br>    tor –service install</p>
<p>服務執行<br>    tor –service start</p>
<p>指定設定檔<br>    tor -f</p>
<p>開啟用批次檔(要用系統管理員權系)，另存成 .bat<br><figure class="highlight bash"><div class="figcode"><div class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></div><div class="code"><pre><div class="line">@<span class="built_in">echo</span> off</div><div class="line"><span class="built_in">set</span> Path=TOR.exe所在的路徑</div><div class="line">::<span class="built_in">set</span> Path=%~dp0</div><div class="line"><span class="built_in">echo</span> %Path%</div><div class="line">%Path%\Tor\tor.exe --service start --defaults-torrc %Path%\Data\Tor\torrc-defaults -f %Path%\Data\Tor\torrc </div><div class="line">pause</div></pre></div></div></figure></p>
<p>資料來源<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>，先簡易用 Google 翻譯，有機會再調整。</p>
<p>COMMAND-LINE OPTIONS</p>
<pre><code>-h, -help
    Display a short help message and exit.
    幫助，可查看可用指令

-f FILE
    Specify a new configuration file to contain further Tor configuration options OR pass - to make Tor read its configuration from standard input. (Default: @CONFDIR@/torrc, or $HOME/.torrc if that file is not found)
    指定設定檔，預設會找尋 @CONFDIR@/torrc, or $HOME/.torrc

--allow-missing-torrc
    Do not require that configuration file specified by -f exist if default torrc can be accessed.
    如果存在預設設定檔，就忽略 -f 參數

--defaults-torrc FILE
    Specify a file in which to find default values for Tor options. The contents of this file are overridden by those in the regular configuration file, and by those on the command line. (Default: @CONFDIR@/torrc-defaults.)
    指定一個檔案，在其中查找 Tor 選項的預設值。該檔案的內容會被常規設定檔中的內容以及命令行中的內容覆蓋。 （預設：@ CONFDIR @ / torrc-defaults。）

--ignore-missing-torrc
    Specifies that Tor should treat a missing torrc file as though it were empty. Ordinarily, Tor does this for missing default torrc files, but not for those specified on the command line.
    指定 Tor 應該將丟失的 torrc 文件視為空文件。通常，Tor 會為缺少的預設 torrc 文件執行此操作，但不會在命令行中指定。

--hash-password PASSWORD
    Generates a hashed password for control port access.
    為控制端口訪問生成散列密碼。

--list-fingerprint
    Generate your keys and output your nickname and fingerprint.
    生成您的密鑰並輸出您的暱稱和指紋。

--verify-config
    Verify the configuration file is valid.
    驗證設定檔是否有效。

--service install [--options command-line options]
    Install an instance of Tor as a Windows service, with the provided command-line options. Current instructions can be found at https://www.torproject.org/docs/faq#NTService
    使用提供的命令行選項，將 Tor 的實例安裝為 Windows 服務。

--service remove|start|stop
    Remove, start, or stop a configured Tor Windows service.
    刪除，啟動或停止配置的 Tor Windows 服務。

--nt-service
    Used internally to implement a Windows service.
    在內部用於實現 Windows 服務。

--list-torrc-options
    List all valid options.
    列出所有有效的選項。

--list-deprecated-options
    List all valid options that are scheduled to become obsolete in a future version. (This is a warning, not a promise.)
    列出將來版本中計劃廢棄的所有有效選項。 （這是提前警告，不是保證。）

--version
    Display Tor version and exit.
    顯示 Tor 版本並退出。

--quiet|--hush
    Override the default console log. By default, Tor starts out logging messages at level &quot;notice&quot; and higher to the console. It stops doing so after it parses its configuration, if the configuration tells it to log anywhere else. You can override this behavior with the --hush option, which tells Tor to only send warnings and errors to the console, or with the --quietoption, which tells Tor not to log to the console at all.
    覆蓋預設控制台日誌。預設情況下，Tor 在 “通知” 級別開始記錄消息並將其發送到控制台。它在解析其配置後會停止，如果配置告訴它在其他地方記錄。您可以使用 --hush 選項覆蓋此行為，該選項告訴 Tor 僅向控制台發送警告和錯誤，或者使用 --quiet 選項，它告訴 Tor 根本不登錄控制台。

--keygen [--newpass]
    Running &quot;tor --keygen&quot; creates a new ed25519 master identity key for a relay, or only a fresh temporary signing key and certificate, if you already have a master key. Optionally you can encrypt the master identity key with a passphrase: Tor will ask you for one. If you don&apos;t want to encrypt the master key, just don&apos;t enter any passphrase when asked.

    The --newpass option should be used with --keygen only when you need to add, change, or remove a passphrase on an existing ed25519 master identity key. You will be prompted for the old passphase (if any), and the new passphrase (if any).

    When generating a master key, you will probably want to use --DataDirectory to control where the keys and certificates will be stored, and --SigningKeyLifetime to control their lifetimes. Their behavior is as documented in the server options section below. (You must have write access to the specified DataDirectory.)

    To use the generated files, you must copy them to the DataDirectory/keys directory of your Tor daemon, and make sure that they are owned by the user actually running the Tor daemon on your system.
    運行 “tor -keygen” 將為中繼創建一個新的 ed25519 主身份密鑰，或者只有新的臨時簽名密鑰和證書（如果您已有主密鑰）。或者，您可以使用密碼加密主身份識別碼：Tor 會要求您輸入密碼。如果您不想加密主密鑰，請在輸入密碼時不要輸入密碼。

    只有在需要添加，更改或刪除現有 ed25519 主身份密鑰上的密碼時， - newpass 選項才應與 --keygen 一起使用。系統會提示您輸入舊的 passphase（如果有）和新的密碼（如果有的話）。

    在生成主密鑰時，您可能需要使用 --DataDirectory 來控制密鑰和證書的存儲位置，以及 --SigningKeyLifetime 來控制它們的生命週期。它們的行為如下面的服務器選項部分所述。 （您必須具有對指定 DataDirectory 的寫入權限。）

    要使用生成的文件，必須將它們複製到 Tor 守護程序的 DataDirectory/keys 目錄中，並確保它們由實際在系統上運行 Tor 守護程序的用戶擁有。

--passphrase-fd FILEDES
    Filedescriptor to read the passphrase from. Note that unlike with the tor-gencert program, the entire file contents are read and used as the passphrase, including any trailing newlines. Default: read from the terminal.
    Filedescriptor 從中讀取密碼。請注意，與 tor-gencert 程序不同，整個文件內容都被讀取並用作密碼，包括任何尾隨的換行符。預設：從終端讀取。

--key-expiration [purpose]
    The purpose specifies which type of key certificate to determine the expiration of. The only currently recognised purpose is &quot;sign&quot;.
    目的是指定哪種類型的密鑰證書來確定過期。目前唯一認可的目的是 “符號”。

    Running &quot;tor --key-expiration sign&quot; will attempt to find your signing key certificate and will output, both in the logs as well as to stdout, the signing key certificates expiration time in ISO-8601 format. For example, the output sent to stdout will be of the form: &quot;signing-cert-expiry: 2017-07-25 08:30:15 UTC&quot;
    運行 “tor -key-expiration sign” 將嘗試查找您的簽名密鑰證書，並且將在日誌以及 stdout 中輸出 ISO-8601 格式的簽名密鑰證書過期時間。例如，發送到 stdout 的輸出將採用以下格式：“signing-cert-expiry：2017-07-25 08:30:15 UTC”
</code></pre><p>Other options can be specified on the command-line in the format “–option value”, in the format”option value”, or in a configuration file. For instance, you can tell Tor to start listening for SOCKS connections on port 9999 by passing –SocksPort 9999 or SocksPort 9999 to it on the command         line, or by putting “SocksPort 9999” in the configuration file. You will need to quote options with spaces in them: if you want Tor to log all debugging messages to debug.log, you will probably need to say –Log debug file debug.log.<br>其他選項可以在命令行中以 “- 選項值” 格式，“選項值” 格式或在設定檔中指定。例如，您可以通過在命令行上傳遞 –SocksPort9999 或 SocksPort 9999，或通過在設定檔中放入 “SocksPort 9999” 來指示 Tor 開始監聽端口 9999 上的 SOCKS 連接。你需引用帶有空格的選項：如果你想 Tor 把所有的調試信息記錄到 debug.log，你可能需要說 –Log 調試文件         debug.log。</p>
<hr>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;"><a href="https://www.torproject.org/docs/tor-manual.html.en" rel="external nofollow noopener noreferrer" target="_blank">https://www.torproject.org/docs/tor-manual.html.en</a></span><a href="#fnref:1" rev="footnote"> ↩</a></li></ol></div></div>
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Tor/" rel="tag"># Tor</a>
          
            <a href="/tags/GFW/" rel="tag"># GFW</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/6edb/" rel="next" title="Vim 指令">
                <i class="fa fa-chevron-left"></i> Vim 指令
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/8fab/" rel="prev" title="Windows 重灌後安裝的軟體">
                Windows 重灌後安裝的軟體 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Flymia</p>
              <p class="site-description motion-element" itemprop="description">MIS、生活、3C</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">15</span>
                    <span class="site-state-item-name">文章</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">標籤</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Flymia</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="網站總字數">98k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="網站總閱讀時間">1:38</span>
  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io" rel="external nofollow noopener noreferrer">Hexo</a> 強力驅動 v3.7.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主題 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next" rel="external nofollow noopener noreferrer">NexT.Muse</a> v6.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.1.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  <script type="text/javascript" src="/lib/zclip/clipboard.min.js"></script>	
<script type="text/javascript" src="/js/src/custom.js"></script>
  

  <div id="copyBtn" style="opacity: 0; position: absolute;top:0px;display: block;line-height: 1; font-size:1.5em"><span id="imgCopy"><i class="fa fa-paste fa-fw"></i></span><span id="imgSuccess" style="display: none;"><i class="fa fa-check-circle fa-fw" aria-hidden="true"></i></span>
</div></body>
</html>
